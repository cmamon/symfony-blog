{% extends 'base.html.twig' %}

{% block title %}Blog{% endblock %}

{% block body %}
  <section class="section">
    <div class="container">
      <h1 class="title">Welcome on our wonderful blog</h1>
    </div>
  </section>

  <section class="section">
    <div class="container">

      <div class="field is-grouped">
        <p class="control">
          <a class="button is-dark" href="{{ path('post_create') }}">
            Write a post >>
          </a>
        </p>
      </div>

      {% for post in posts %}
        <article class="message {% if loop.index0 == 0 %} is_lastness {% endif %}">

          <div class="message-header {% if loop.index0 == 0 %} is_lastness {% endif %}">

            <p>{{ posts[loop.revindex0].name }}</p>
            <span>
              <a style="padding-right: 15px" href="{{ path('post_delete', {'id': posts[loop.revindex0].id}) }}">
                <i class="fas fa-thumbtack"></i>
              </a>
              <a style="padding-right: 15px" href="{{ path('post_edit', {'id': posts[loop.revindex0].id}) }}">
                <i class="fas fa-edit"></i>
              </a>
              <a href="{{ path('post_delete', {'id': posts[loop.revindex0].id}) }}" >
                <i class="far fa-times-circle" ></i>
              </a>
            </span>
          </div>
          <div class="message-body">
            <figure class="image" style="margin-left: auto;margin-right: auto;">
              <img src="{{ asset('files/images/' ~ posts[loop.revindex0].image) }}"><br>
            </figure>
            <em>{{ posts[loop.revindex0].publicationDate.format('H:i \o\n l jS F Y') }} </em><br>
            {{ posts[loop.revindex0].content }}
            <br><br>
            <div class="field is-grouped">
              <p class="control">
                <a class="button is-dark {% if loop.index0 == 0 %} is_lastness {% endif %}"
                   href="{{ path('post_show', {'id': posts[loop.revindex0].id}) }}">
                  View article >>
                </a>
              </p>
            </div>
          </div>
        </article>
      {% endfor %}
    </div>
  </section>
{% endblock %}
